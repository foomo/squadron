version: "2.2"

global:
  host: mycompany.com
  enabled: true

squadron:
  storefinder:
    frontend:
      chart: <% env "PROJECT_ROOT" %>/_examples/common/charts/frontend
      builds:
        default:
          tag: [ storefinder/frontend:latest ]
      values:
        image:
          repository: storefinder/frontend
          tag: latest
        env:
          ENV: <% env "SHELL" %>
          GLOBAL: <% .Global.host %>
          BASE64: <% "1234567890" | b64enc %>
          DEFAULT_VALUE: <% "" | default "fallback" %>
          DEFAULT_INDEX_VALUE: <% defaultIndex .Global "notexists" "fallback" %>
          # ONE_PASSWORD: <% op "ACCOUNT_NAME" "UUID" "FIELD" %>
          # ONE_PASSWORD: <% op "ACCOUNT_NAME" "Secret name" "FIELD" %>
          # ONE_PASSWORD: <% op "ACCOUNT_NAME" "Secret name wit global {{ .Global.host }}" "FIELD" %>
        values: |
          <% file "testdata/template/squadron.values.yaml" | indent 5 %>
    backend:
      chart: <% env "PROJECT_ROOT" %>/_examples/common/charts/backend
      builds:
        default:
          tag: [ storefinder/backend:latest ]
      values:
        image:
          repository: storefinder/backend
          tag: latest
